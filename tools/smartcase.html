<style>
    .tool-wrapper {
        background: var(--bg-card);
        border-radius: 16px;
        padding: 24px;
        border: 1px solid var(--border);
        box-shadow: 0 10px 15px -3px rgba(0,0,0,0.05);
    }

    .tool-header {
        margin-bottom: 20px;
        border-bottom: 1px solid var(--border);
        padding-bottom: 15px;
    }

    .tool-header h3 { margin: 0; color: var(--primary); font-size: 20px; }
    .tool-header p { margin: 5px 0 0; color: var(--text-muted); font-size: 13px; }

    textarea {
        width: 100%;
        height: 250px;
        padding: 20px;
        border: 1px solid var(--border);
        border-radius: 12px;
        font-family: 'Inter', sans-serif;
        font-size: 16px;
        line-height: 1.6;
        background: #fdfdfd;
        resize: vertical;
        outline: none;
        transition: border 0.2s;
    }

    textarea:focus { border-color: var(--accent); }

    .stats-bar {
        display: flex;
        gap: 20px;
        margin-top: 15px;
        padding: 12px;
        background: var(--bg-site);
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        color: var(--text-muted);
    }

    .stats-bar span b { color: var(--primary); }

    .action-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 12px;
        margin-top: 20px;
    }

    .case-btn {
        background: white;
        border: 1px solid var(--border);
        padding: 12px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 13px;
        cursor: pointer;
        transition: 0.2s;
        color: var(--text-main);
    }

    .case-btn:hover {
        border-color: var(--accent);
        color: var(--accent);
        background: #eff6ff;
    }

    .copy-btn {
        grid-column: span 1;
        background: var(--success);
        color: white;
        border: none;
        padding: 12px;
        border-radius: 8px;
        font-weight: 700;
        cursor: pointer;
        transition: transform 0.1s;
    }

    .copy-btn:active { transform: scale(0.98); }

    /* Success Toast */
    #toast {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: var(--primary);
        color: white;
        padding: 12px 24px;
        border-radius: 30px;
        font-size: 13px;
        font-weight: 600;
        box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        display: none;
        animation: slideIn 0.3s ease;
    }

    @keyframes slideIn { from { transform: translateY(100px); } to { transform: translateY(0); } }
</style>

<div class="tool-wrapper">
    <div class="tool-header">
        <h3>SmartCase Pro</h3>
        <p>Premium capitalization logic for high-end formatting and data cleaning.</p>
    </div>

    <textarea id="mainInput" placeholder="Paste your messy text here..." oninput="updateStats()"></textarea>

    <div class="stats-bar">
        <span>Characters: <b id="charCount">0</b></span>
        <span>Words: <b id="wordCount">0</b></span>
        <span>Lines: <b id="lineCount">0</b></span>
    </div>

    <div class="action-grid">
        <button class="case-btn" onclick="transformCase('title')">Smart Title Case</button>
        <button class="case-btn" onclick="transformCase('sentence')">Sentence Case</button>
        <button class="case-btn" onclick="transformCase('upper')">ALL CAPS</button>
        <button class="case-btn" onclick="transformCase('lower')">lowercase</button>
        <button class="copy-btn" onclick="copyContent()">ðŸ“‹ Copy Result</button>
    </div>
</div>

<div id="toast">Copied to Clipboard!</div>

<script>
    function updateStats() {
        const text = document.getElementById('mainInput').value;
        document.getElementById('charCount').innerText = text.length;
        document.getElementById('wordCount').innerText = text.trim() ? text.trim().split(/\s+/).length : 0;
        document.getElementById('lineCount').innerText = text.trim() ? text.split(/\n/).length : 0;
    }

    function transformCase(type) {
        const area = document.getElementById('mainInput');
        let text = area.value.trim();
        if (!text) return;

        const minorWords = ['a', 'an', 'the', 'and', 'but', 'or', 'for', 'nor', 'on', 'at', 'to', 'from', 'by', 'of', 'in', 'with'];
        const acronyms = ['USA', 'UK', 'NASA', 'CEO', 'SaaS', 'ROI', 'LLC', 'VAT', 'SEO', 'AI', 'JSON', 'API'];

        switch(type) {
            case 'upper':
                text = text.toUpperCase();
                break;
            case 'lower':
                text = text.toLowerCase();
                break;
            case 'sentence':
                text = text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, c => c.toUpperCase());
                break;
            case 'title':
                text = text.toLowerCase().split(' ').map((word, index, array) => {
                    // Always capitalize first and last word
                    if (index === 0 || index === array.length - 1) return word.charAt(0).toUpperCase() + word.slice(1);
                    // Protect common Tier-1 business acronyms
                    let upperTest = word.toUpperCase();
                    if (acronyms.includes(upperTest)) return upperTest;
                    // Don't capitalize minor words
                    if (minorWords.includes(word)) return word;
                    // Capitalize regular words
                    return word.charAt(0).toUpperCase() + word.slice(1);
                }).join(' ');
                break;
        }
        area.value = text;
        updateStats();
    }

    function copyContent() {
        const text = document.getElementById('mainInput').value;
        if (!text) return;
        navigator.clipboard.writeText(text);
        
        const toast = document.getElementById('toast');
        toast.style.display = 'block';
        setTimeout(() => { toast.style.display = 'none'; }, 2500);
    }
</script>
